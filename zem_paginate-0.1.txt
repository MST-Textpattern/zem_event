# zem_paginate v0.1
# Pagination tags
# Alex Shiels
# http://thresholdstate.com/

# ......................................................................
# This is a plugin for Textpattern - http://textpattern.com/
# To install: textpattern > admin > plugins
# Paste the following text into the 'Install plugin' box:
# ......................................................................

YToxMDp7czo3OiJ2ZXJzaW9uIjtzOjM6IjAuMSI7czo2OiJhdXRob3IiO3M6MTE6IkFsZXgg
U2hpZWxzIjtzOjEwOiJhdXRob3JfdXJpIjtzOjI2OiJodHRwOi8vdGhyZXNob2xkc3RhdGUu
Y29tLyI7czoxMToiZGVzY3JpcHRpb24iO3M6MTU6IlBhZ2luYXRpb24gdGFncyI7czo0OiJ0
eXBlIjtpOjA7czo0OiJuYW1lIjtzOjEyOiJ6ZW1fcGFnaW5hdGUiO3M6NDoiaGVscCI7czo0
NjoiCTxoMT5UZXh0aWxlLWZvcm1hdHRlZCBoZWxwIGdvZXMgaGVyZTwvaDE+CgoKICI7czo0
OiJjb2RlIjtzOjIwNDY6IgovLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoJZnVuY3Rpb24gemVtX25ld2VyKCRhdHRz
LCAkdGhpbmcgPSBmYWxzZSkKCXsKCQlnbG9iYWwgJHRoaXNwYWdlLCAkcHJldGV4dCwgJHBl
cm1saW5rX21vZGU7CgoJCWV4dHJhY3QobEF0dHMoYXJyYXkoCgkJCSdzaG93YWx3YXlzJyA9
PiAwLAoJCSksICRhdHRzKSk7CgoJCSRudW1QYWdlcyA9ICR0aGlzcGFnZVsnbnVtUGFnZXMn
XTsKCQkkcGcJCQkJPSAkdGhpc3BhZ2VbJ3BnJ107CgoJCWlmICgkbnVtUGFnZXMgPiAxIGFu
ZCAkcGcgPiAxKQoJCXsKCQkJJG5leHRwZyA9ICgkcGcgLSAxID09IDEpID8gMCA6ICgkcGcg
LSAxKTsKCgkJCS8vIGF1dGhvciB1cmxzIHNob3VsZCB1c2UgUmVhbE5hbWUsIHJhdGhlciB0
aGFuIHVzZXJuYW1lCgkJCWlmICghZW1wdHkoJHByZXRleHRbJ2F1dGhvciddKSkgewoJCQkJ
JGF1dGhvciA9IHNhZmVfZmllbGQoJ1JlYWxOYW1lJywgJ3R4cF91c2VycycsICJuYW1lID0g
JyIuZG9TbGFzaCgkcHJldGV4dFsnYXV0aG9yJ10pLiInIik7CgkJCX0gZWxzZSB7CgkJCQkk
YXV0aG9yID0gJyc7CgkJCX0KCgkJCSRwYXJ0cyA9IGFycmF5KAoJCQkJJ3BnJwkJID0+ICRu
ZXh0cGcsCgkJCQkncycJCQkgPT4gQCRwcmV0ZXh0WydzJ10sCgkJCQknYycJCQkgPT4gQCRw
cmV0ZXh0WydjJ10sCgkJCQkncScJCQkgPT4gQCRwcmV0ZXh0WydxJ10sCgkJCQknYXV0aG9y
JyA9PiAkYXV0aG9yCgkJCSk7CgoJCQkkcGFydHMgPSAkcGFydHMgKyAkX0dFVDsKCQkJJHVy
bCA9IHBhZ2VsaW5rdXJsKCRwYXJ0cyk7CgoJCQlpZiAoJHRoaW5nKQoJCQl7CgkJCQlyZXR1
cm4gJzxhIGhyZWY9IicuJHVybC4nIicuCgkJCQkJKGVtcHR5KCR0aXRsZSkgPyAnJyA6ICcg
dGl0bGU9IicuJHRpdGxlLiciJykuCgkJCQkJJz4nLnBhcnNlKCR0aGluZykuJzwvYT4nOwoJ
CQl9CgoJCQlyZXR1cm4gJHVybDsKCQl9CgoJCXJldHVybiAoJHNob3dhbHdheXMpID8gcGFy
c2UoJHRoaW5nKSA6ICcnOwoJfQoKLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQoKCWZ1bmN0aW9uIHplbV9vbGRlcigk
YXR0cywgJHRoaW5nID0gZmFsc2UpCgl7CgkJZ2xvYmFsICR0aGlzcGFnZSwgJHByZXRleHQs
ICRwZXJtbGlua19tb2RlOwoKCQlleHRyYWN0KGxBdHRzKGFycmF5KAoJCQknc2hvd2Fsd2F5
cycgPT4gMCwKCQkpLCAkYXR0cykpOwoKCQkkbnVtUGFnZXMgPSAkdGhpc3BhZ2VbJ251bVBh
Z2VzJ107CgkJJHBnCQkJCT0gJHRoaXNwYWdlWydwZyddOwoKCQlpZiAoJG51bVBhZ2VzID4g
MSBhbmQgJHBnICE9ICRudW1QYWdlcykKCQl7CgkJCSRuZXh0cGcgPSAkcGcgKyAxOwoKCQkJ
Ly8gYXV0aG9yIHVybHMgc2hvdWxkIHVzZSBSZWFsTmFtZSwgcmF0aGVyIHRoYW4gdXNlcm5h
bWUKCQkJaWYgKCFlbXB0eSgkcHJldGV4dFsnYXV0aG9yJ10pKSB7CgkJCQkkYXV0aG9yID0g
c2FmZV9maWVsZCgnUmVhbE5hbWUnLCAndHhwX3VzZXJzJywgIm5hbWUgPSAnIi5kb1NsYXNo
KCRwcmV0ZXh0WydhdXRob3InXSkuIiciKTsKCQkJfSBlbHNlIHsKCQkJCSRhdXRob3IgPSAn
JzsKCQkJfQoKCQkJJHBhcnRzID0gYXJyYXkoCgkJCQkncGcnCQkgPT4gJG5leHRwZywKCQkJ
CSdzJwkJCSA9PiBAJHByZXRleHRbJ3MnXSwKCQkJCSdjJwkJCSA9PiBAJHByZXRleHRbJ2Mn
XSwKCQkJCSdxJwkJCSA9PiBAJHByZXRleHRbJ3EnXSwKCQkJCSdhdXRob3InID0+ICRhdXRo
b3IKCQkJKTsKCgkJCSRwYXJ0cyA9ICRwYXJ0cyArICRfR0VUOwoJCQkkdXJsID0gcGFnZWxp
bmt1cmwoJHBhcnRzKTsKCgkJCWlmICgkdGhpbmcpCgkJCXsKCQkJCXJldHVybiAnPGEgaHJl
Zj0iJy4kdXJsLiciJy4KCQkJCQkoZW1wdHkoJHRpdGxlKSA/ICcnIDogJyB0aXRsZT0iJy4k
dGl0bGUuJyInKS4KCQkJCQknPicucGFyc2UoJHRoaW5nKS4nPC9hPic7CgkJCX0KCgkJCXJl
dHVybiAkdXJsOwoJCX0KCgkJcmV0dXJuICgkc2hvd2Fsd2F5cykgPyBwYXJzZSgkdGhpbmcp
IDogJyc7Cgl9CiI7czo4OiJoZWxwX3JhdyI7czozNjoiaDEuIFRleHRpbGUtZm9ybWF0dGVk
IGhlbHAgZ29lcyBoZXJlIjtzOjM6Im1kNSI7czozMjoiZjcwMzYyZWU1ZWU0MTAxMWNkMTAw
OGJiOTRlNGNhMjEiO30=
